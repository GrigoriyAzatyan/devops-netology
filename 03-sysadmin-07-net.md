## 1. На лекции мы обсудили, что манипулировать размером окна необходимо для эффективного наполнения приемного буфера участников TCP сессии (Flow Control). 
Подобная проблема в полной мере возникает в сетях с высоким RTT. Например, если вы захотите передать 500 Гб бэкап из региона Юга-Восточной Азии на Восточное побережье США. 
Здесь вы можете увидеть и 200 и 400 мс вполне реального RTT. Подсчитайте, какого размера нужно окно TCP чтобы наполнить 1 Гбит/с канал при 300 мс RTT 
(берем простую ситуацию без потери пакетов). Можно воспользоваться готовым калькулятором. Ознакомиться с формулами, по которым работает калькулятор можно, например, на Wiki.

## 2. Во сколько раз упадет пропускная способность канала, если будет 1% потерь пакетов при передаче?  
Пробуем выполнить iperf между хостом и виртуальной машиной:  
iperf3 -c 10.0.0.49  
`Connecting to host 10.0.0.49, port 5201`  
`[  5] local 10.0.0.41 port 58544 connected to 10.0.0.49 port 5201`  
`[ ID] Interval           Transfer     Bitrate         Retr  Cwnd`  
`[  5]   0.00-1.00   sec   283 MBytes  2.37 Gbits/sec    0    221 KBytes`  
`[  5]   1.00-2.00   sec   281 MBytes  2.36 Gbits/sec    0    221 KBytes`  
`[  5]   2.00-3.00   sec   287 MBytes  2.41 Gbits/sec    0    221 KBytes`  
`[  5]   3.00-4.00   sec   282 MBytes  2.37 Gbits/sec    0    221 KBytes`  
`[  5]   4.00-5.00   sec   280 MBytes  2.35 Gbits/sec    0    221 KBytes`  
`[  5]   5.00-6.00   sec   288 MBytes  2.41 Gbits/sec    0    221 KBytes`  
`[  5]   6.00-7.00   sec   288 MBytes  2.41 Gbits/sec    0    221 KBytes`  
`[  5]   7.00-8.00   sec   286 MBytes  2.40 Gbits/sec    0    221 KBytes`  
`[  5]   8.00-9.00   sec   286 MBytes  2.40 Gbits/sec    0    221 KBytes`  
`[  5]   9.00-10.00  sec   286 MBytes  2.40 Gbits/sec    0    221 KBytes`  
`- - - - - - - - - - - - - - - - - - - - - - - - -`  
`[ ID] Interval           Transfer     Bitrate         Retr`  
`[  5]   0.00-10.00  sec  2.78 GBytes  2.39 Gbits/sec    0             sender`  
`[  5]   0.00-10.00  sec  2.78 GBytes  2.39 Gbits/sec                  receiver`  

Исходная пропускная способность составляет **2.39 Gbits/sec.**  

Добавим со стороны клиента искусственную потерю пакетов:    
`tc qdisc add dev enp0s3 root netem loss 1%`    
  
Повторим замер:   
iperf3 -c 10.0.0.49  
`Connecting to host 10.0.0.49, port 5201`  
`[  5] local 10.0.0.41 port 58580 connected to 10.0.0.49 port 5201`  
`[ ID] Interval           Transfer     Bitrate         Retr  Cwnd`  
`[  5]   0.00-1.00   sec   205 MBytes  1.72 Gbits/sec  1820   49.9 KBytes`  
`[  5]   1.00-2.00   sec   235 MBytes  1.97 Gbits/sec  1799   44.2 KBytes`  
`[  5]   2.00-3.00   sec   239 MBytes  2.01 Gbits/sec  1844   88.4 KBytes`  
`[  5]   3.00-4.00   sec   236 MBytes  1.98 Gbits/sec  1837   62.7 KBytes`  
`[  5]   4.00-5.00   sec   238 MBytes  2.00 Gbits/sec  1770   74.1 KBytes`  
`[  5]   5.00-6.00   sec   234 MBytes  1.96 Gbits/sec  1622   38.5 KBytes`  
`[  5]   6.00-7.00   sec   242 MBytes  2.03 Gbits/sec  1889   48.5 KBytes`  
`[  5]   7.00-8.00   sec   240 MBytes  2.01 Gbits/sec  1813   38.5 KBytes`  
`[  5]   8.00-9.00   sec   228 MBytes  1.91 Gbits/sec  1887   58.5 KBytes`  
`[  5]   9.00-10.00  sec   229 MBytes  1.92 Gbits/sec  1963   44.2 KBytes`  
`- - - - - - - - - - - - - - - - - - - - - - - - -`  
`[ ID] Interval           Transfer     Bitrate         Retr`  
`[  5]   0.00-10.00  sec  2.27 GBytes  1.95 Gbits/sec  18244             sender`  
`[  5]   0.00-10.00  sec  2.27 GBytes  1.95 Gbits/sec                  receiver`  

**Итого: скорость была 2.39 Gbits/sec, стала 1.95 Gbits/sec, уменьшилась в 1,22 раза.** 



## 3. Какая максимальная реальная скорость передачи данных достижима при линке 100 Мбит/с? Вопрос про TCP payload, то есть цифры, которые вы реально увидите в операционной системе в тестах или в браузере при скачивании файлов. Повлияет ли размер фрейма на это?

## 4. Что на самом деле происходит, когда вы открываете сайт? :) На прошлой лекции был приведен сокращенный вариант ответа на этот вопрос. Теперь вы знаете намного больше, в частности про IP адресацию, DNS и т.д. Опишите максимально подробно насколько вы это можете сделать, что происходит, когда вы делаете запрос curl -I http://netology.ru с вашей рабочей станции. Предположим, что arp кеш очищен, в локальном DNS нет закешированных записей.

## 5. Сколько и каких итеративных запросов будет сделано при резолве домена www.google.co.uk?

## 6. Сколько доступно для назначения хостам адресов в подсети /25? А в подсети с маской 255.248.0.0. Постарайтесь потренироваться в ручных вычислениях чтобы немного набить руку, не пользоваться калькулятором сразу.
С 25 маской - 126 узлов, с 255.248.0.0 (префикс 21) - 2046 узлов.  

## 7. В какой подсети больше адресов, в /23 или /24?  
С 23 маской адресов вдвое больше.  

## 8. Получится ли разделить диапазон 10.0.0.0/8 на 128 подсетей по 131070 адресов в каждой? Какая маска будет у таких подсетей?
У подсети 10.0.0.0/8 16777216 адресов. Делим на 128, получаем 131072. Вычитая адрес сети и broadcast, получаем 131070 адресов узлов.  
Берем 2 узла у маски 31, начинаем возводить двойку в степень, с каждым шагом уменьшая маску на 1. Получается 131072 на 15 маске.
Итого, у подсетей будет маска 255.254.0.0 (/15).  
